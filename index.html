<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swami Studio | Professional Photography</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --gold: #D4AF37;
            --black: #0f0f0f;
            --dark: #1a1a1a;
            --white: #ffffff;
            --text-gray: #cccccc;
        }

        /* --- DIWALI THEME OVERRIDE --- */
        body.diwali-theme {
            --gold: #ff9933; /* Saffron */
            --black: #2e0000; /* Deep Red Background */
            border-top: 5px solid #ffcc00;
        }

        body { margin: 0; font-family: 'Lato', sans-serif; background-color: var(--black); color: var(--white); overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--gold); }
        
        /* Navbar - UPDATED FOR LOGO + TEXT */
        nav { 
            display: flex; 
            justify-content: space-between; 
            padding: 15px 5%; 
            background: var(--dark); 
            align-items: center; 
            border-bottom: 1px solid var(--gold); 
        }

        /* Brand Container (Holds Logo & Text) */
        .brand-container {
            display: flex;
            align-items: center;
            gap: 15px; /* Space between logo and text */
        }

        .logo-img { 
            height: 50px; 
            width: 50px; 
            object-fit: contain; 
            border-radius: 50%; /* Makes it circular if square */
            border: 2px solid var(--gold);
            display: none; /* Hidden by default until loaded */
        } 

        /* Hero */
        .hero { height: 80vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80'); background-size: cover; background-position: center; }
        .btn-gold { padding: 12px 30px; border: 2px solid var(--gold); color: var(--gold); background: transparent; cursor: pointer; text-transform: uppercase; font-weight: bold; margin-top: 20px; transition: 0.3s; }
        .btn-gold:hover { background: var(--gold); color: var(--black); }

        /* Sections */
        .section { padding: 60px 10%; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 30px; }
        
        /* Gallery Images */
        .gallery-img { width: 100%; height: 250px; object-fit: cover; border: 2px solid var(--gold); border-radius: 4px; transition: transform 0.3s; }
        .gallery-img:hover { transform: scale(1.03); }

        /* Testimonials */
        .testimonial-card { background: var(--dark); padding: 20px; border-left: 3px solid var(--gold); }
        
        /* Booking Form */
        input, select, textarea { width: 100%; padding: 10px; margin-bottom: 10px; background: #333; border: 1px solid #555; color: white; }
    </style>
</head>
<body>

    <nav>
        <div class="brand-container">
            <img id="nav-logo" src="" alt="Logo" class="logo-img">
            <h2 id="nav-text" style="margin:0;">SWAMI STUDIO</h2>
        </div>

        <div>
            <a href="#gallery" style="color:white; margin-right:15px; text-decoration:none;">Gallery</a>
            <a href="#contact" style="color:var(--gold); text-decoration:none;">Book Now</a>
        </div>
    </nav>

    <header class="hero">
        <h1 id="hero-title">Welcome to Swami Studio</h1>
        <p id="hero-tagline" style="font-size: 1.2rem; margin-top: 10px;">Loading your story...</p>
        <a href="#contact" class="btn-gold">Book a Shoot</a>
    </header>

    <section class="section" id="services">
        <h2 style="text-align: center;">Our Premium Services</h2>
        <div id="services-list" class="grid-container"></div>
    </section>

    <section class="section" id="gallery" style="background: var(--dark);">
        <h2 style="text-align: center;">Latest Work</h2>
        <div id="gallery-grid" class="grid-container"></div>
    </section>

    <section class="section">
        <h2 style="text-align: center;">Client Love</h2>
        <div id="testimonials-list" class="grid-container"></div>
    </section>

    <section class="section" id="contact" style="background: var(--dark);">
        <h2 style="text-align: center;">Book Your Date</h2>
        <form id="bookingForm" style="max-width: 500px; margin: 0 auto;">
            <input type="text" id="c-name" placeholder="Your Name" required>
            <input type="tel" id="c-phone" placeholder="Phone Number" required>
            <select id="c-type">
                <option>Wedding Photography</option>
                <option>Pre-Wedding</option>
                <option>Modeling Portfolio</option>
                <option>Product Shoot</option>
            </select>
            <input type="date" id="c-date" required>
            <button type="submit" class="btn-gold" style="width: 100%;">Send Request</button>
        </form>
    </section>

    <footer style="text-align: center; padding: 20px; border-top: 1px solid #333;">
        <p>&copy; 2024 Swami Studio. All rights reserved.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyADXKgZ-y4Oo4BjfGfW7euGLCPp623KE-M",
            authDomain: "swami-studio.firebaseapp.com",
            databaseURL: "https://swami-studio-default-rtdb.firebaseio.com",
            projectId: "swami-studio",
            storageBucket: "swami-studio.firebasestorage.app",
            messagingSenderId: "680267170622",
            appId: "1:680267170622:web:2a489e33c206b72b06e26f",
            measurementId: "G-2K4X9057XG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 1. LOAD SITE SETTINGS (Tagline, Theme, Logo)
        const settingsRef = ref(db, 'settings');
        onValue(settingsRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                if(data.tagline) document.getElementById('hero-tagline').innerText = data.tagline;
                
                // Theme
                if (data.theme === 'Diwali') {
                    document.body.classList.add('diwali-theme');
                } else {
                    document.body.classList.remove('diwali-theme');
                }

                // Logo Logic - SHOWS BOTH LOGO AND TEXT
                if (data.logoUrl) {
                    const logo = document.getElementById('nav-logo');
                    logo.src = data.logoUrl;
                    logo.style.display = 'block'; // Show the image
                    // We do NOT hide the text anymore
                }
            }
        });

        // 2. LOAD OTHER DATA (Services, Gallery, etc.)
        onValue(ref(db, 'gallery'), (snap) => {
            const div = document.getElementById('gallery-grid');
            div.innerHTML = "";
            if(snap.exists()) snap.forEach(c => div.innerHTML += `<img src="${c.val().url}" class="gallery-img">`);
        });

        onValue(ref(db, 'services'), (snap) => {
            const div = document.getElementById('services-list');
            div.innerHTML = "";
            if(snap.exists()) snap.forEach(c => div.innerHTML += `<div style="background:#222; padding:20px; border:1px solid #444;"><h3 style="margin-top:0;">${c.val().name}</h3><p style="color:#aaa;">Price: â‚¹${c.val().price}</p></div>`);
        });

        onValue(ref(db, 'testimonials'), (snap) => {
            const div = document.getElementById('testimonials-list');
            div.innerHTML = "";
            if(snap.exists()) snap.forEach(c => div.innerHTML += `<div class="testimonial-card"><p>"${c.val().msg}"</p><small style="color:var(--gold);">- ${c.val().client}</small></div>`);
        });

        document.getElementById('bookingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const newBooking = push(ref(db, 'bookings'));
            set(newBooking, {
                name: document.getElementById('c-name').value,
                phone: document.getElementById('c-phone').value,
                type: document.getElementById('c-type').value,
                date: document.getElementById('c-date').value,
                status: "Pending"
            }).then(() => { alert("Booking Request Sent!"); e.target.reset(); });
        });
    </script>
</body>
</html>