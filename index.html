<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swami Studio | Professional Photography</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- THEME & VARIABLES --- */
        :root {
            --gold: #D4AF37;
            --black: #0f0f0f;
            --dark: #1a1a1a;
            --white: #ffffff;
            --gray: #cccccc;
        }

        body { margin: 0; font-family: 'Lato', sans-serif; background-color: var(--black); color: var(--white); overflow-x: hidden; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; color: var(--gold); }
        a { text-decoration: none; color: inherit; }

        /* --- NAVBAR --- */
        nav { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 15px 5%; background: var(--dark); border-bottom: 1px solid var(--gold); 
            position: sticky; top: 0; z-index: 1000;
        }
        .brand { display: flex; align-items: center; gap: 15px; }
        .logo-img { height: 50px; border-radius: 50%; border: 2px solid var(--gold); display: none; }
        .nav-links a { color: var(--white); margin-left: 20px; font-weight: bold; font-size: 0.9rem; transition: 0.3s; }
        .nav-links a:hover { color: var(--gold); }

        /* --- HERO --- */
        .hero { 
            height: 70vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; 
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80'); 
            background-size: cover; background-position: center; 
        }
        .btn-gold { 
            padding: 12px 30px; border: 2px solid var(--gold); color: var(--gold); 
            background: transparent; cursor: pointer; text-transform: uppercase; font-weight: bold; margin-top: 20px; transition: 0.3s; 
        }
        .btn-gold:hover { background: var(--gold); color: var(--black); }

        /* --- PRODUCT / GALLERY GRID (JIJA STYLE) --- */
        .section { padding: 60px 5%; }
        .grid-container { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 25px; margin-top: 30px; 
        }
        
        .product-card {
            background: #222; border: 1px solid #333; border-radius: 8px; overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2); }
        
        .card-img { 
            width: 100%; height: 250px; object-fit: cover; border-bottom: 3px solid var(--gold); 
        }
        
        .card-info { padding: 15px; text-align: center; }
        .card-cat { color: #888; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .card-title { font-size: 1.2rem; margin: 5px 0; color: white; }
        .card-price { color: var(--gold); font-size: 1.3rem; font-weight: bold; margin: 10px 0; }
        .card-desc { font-size: 0.9rem; color: #aaa; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }

        .btn-book { 
            display: block; width: 100%; padding: 10px; background: #333; 
            color: white; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; 
        }
        .btn-book:hover { background: var(--gold); color: black; }

        /* --- CONTACT FORM --- */
        input, select, textarea { 
            width: 100%; padding: 12px; margin-bottom: 10px; background: #333; 
            border: 1px solid #555; color: white; border-radius: 4px; box-sizing: border-box;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2rem; }
            .grid-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="brand">
            <img id="nav-logo" src="" alt="Logo" class="logo-img">
            <h2 id="nav-text" style="margin:0;">SWAMI STUDIO</h2>
        </div>
        <div class="nav-links">
            <a href="#gallery">Portfolio</a>
            <a href="#contact" style="color:var(--gold);">Book Now</a>
        </div>
    </nav>

    <header class="hero">
        <h1 id="hero-title">Welcome to Swami Studio</h1>
        <p id="hero-tagline" style="font-size: 1.2rem; margin-top: 10px; color:#ddd;">Loading...</p>
        <a href="#contact" class="btn-gold">Book a Shoot</a>
    </header>

    <section class="section" id="gallery">
        <h2 style="text-align: center; border-bottom: 2px solid var(--gold); display:inline-block; padding-bottom:10px;">Our Services & Projects</h2>
        <p style="text-align:center; color:#888;">Explore our latest work and packages</p>
        
        <div id="gallery-grid" class="grid-container">
            <p style="text-align:center; width:100%;">Loading projects...</p>
        </div>
    </section>

    <section class="section" id="contact" style="background: var(--dark);">
        <h2 style="text-align: center;">Book Your Date</h2>
        <form id="bookingForm" style="max-width: 500px; margin: 0 auto;">
            <input type="text" id="c-name" placeholder="Your Name" required>
            <input type="tel" id="c-phone" placeholder="Phone Number" required>
            <select id="c-type">
                <option>Wedding Photography</option>
                <option>Pre-Wedding</option>
                <option>Modeling Portfolio</option>
                <option>Product Shoot</option>
            </select>
            <input type="date" id="c-date" required>
            <button type="submit" class="btn-gold" style="width: 100%;">Send Request</button>
        </form>
    </section>

    <footer style="text-align: center; padding: 20px; border-top: 1px solid #333; margin-top: 50px;">
        <p>&copy; 2024 Swami Studio. All rights reserved.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, push, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyADXKgZ-y4Oo4BjfGfW7euGLCPp623KE-M",
            authDomain: "swami-studio.firebaseapp.com",
            databaseURL: "https://swami-studio-default-rtdb.firebaseio.com",
            projectId: "swami-studio",
            storageBucket: "swami-studio.firebasestorage.app",
            messagingSenderId: "680267170622",
            appId: "1:680267170622:web:2a489e33c206b72b06e26f",
            measurementId: "G-2K4X9057XG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // 1. LOAD SETTINGS (Logo, Title, Tagline)
        const settingsRef = ref(db, 'settings');
        onValue(settingsRef, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                if(data.tagline) document.getElementById('hero-tagline').innerText = data.tagline;
                if(data.logoUrl) {
                    const logo = document.getElementById('nav-logo');
                    logo.src = data.logoUrl;
                    logo.style.display = 'block';
                }
            }
        });

        // 2. LOAD PROJECTS / GALLERY (With Prices!)
        const galleryRef = ref(db, 'gallery');
        onValue(galleryRef, (snapshot) => {
            const galleryDiv = document.getElementById('gallery-grid');
            galleryDiv.innerHTML = ""; // Clear loading text
            
            if(snapshot.exists()){
                // Loop through every project you added in Admin
                snapshot.forEach((child) => {
                    const p = child.val();
                    
                    // Default values if missing
                    const title = p.title || "Untitled Project";
                    const cat = p.category || "General";
                    const price = p.price ? `â‚¹${p.price}` : "Contact for Price";
                    const img = p.mainImage || "https://via.placeholder.com/300x200?text=No+Image";
                    const desc = p.description || "";

                    // Create the HTML Card
                    const cardHTML = `
                        <div class="product-card">
                            <img src="${img}" class="card-img" alt="${title}">
                            <div class="card-info">
                                <span class="card-cat">${cat}</span>
                                <h3 class="card-title">${title}</h3>
                                <p class="card-desc">${desc}</p>
                                <div class="card-price">${price}</div>
                                <button class="btn-book" onclick="bookThis('${title}')">Book Now</button>
                            </div>
                        </div>
                    `;
                    galleryDiv.innerHTML += cardHTML;
                });
            } else {
                galleryDiv.innerHTML = "<p style='text-align:center; width:100%;'>No projects added yet.</p>";
            }
        });

        // 3. BOOKING FUNCTION (Auto-fills the form)
        window.bookThis = function(serviceName) {
            document.getElementById('c-type').value = serviceName; // Set dropdown to this service
            document.getElementById('contact').scrollIntoView({ behavior: 'smooth' }); // Scroll down
        }

        // 4. HANDLE BOOKING FORM SUBMIT
        document.getElementById('bookingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const bookingsRef = ref(db, 'bookings');
            const newBooking = push(bookingsRef);
            set(newBooking, {
                name: document.getElementById('c-name').value,
                phone: document.getElementById('c-phone').value,
                type: document.getElementById('c-type').value,
                date: document.getElementById('c-date').value,
                status: "Pending"
            }).then(() => {
                alert("Booking Request Sent! We will contact you soon.");
                e.target.reset();
            });
        });
    </script>
</body>
</html>
